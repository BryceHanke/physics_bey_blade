[gd_scene load_steps=7 format=3 uid="uid://modular_blade_uid"]

[ext_resource type="Script" uid="uid://modular_blade_script" path="res://scripts/modular_blade.gd" id="1_modular"]
[ext_resource type="AudioStream" uid="uid://bgc8wr83wdtwh" path="res://assets/sounds/wind.mp3" id="2_wind"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_mod"]
friction = 0.5
bounce = 0.5
absorbent = true

[sub_resource type="SphereShape3D" id="SphereShape3D_tip"]
radius = 0.1

[sub_resource type="CylinderShape3D" id="CylinderShape3D_body"]
height = 0.1
radius = 0.25

[sub_resource type="CylinderShape3D" id="CylinderShape3D_ring"]
height = 0.05
radius = 0.28

[node name="ModularBlade" type="RigidBody3D" node_paths=PackedStringArray("ray")]
mass = 0.5
physics_material_override = SubResource("PhysicsMaterial_mod")
continuous_cd = true
angular_damp = 0.01
script = ExtResource("1_modular")
ray = NodePath("RayCast3D")

[node name="Visuals" type="Node3D" parent="."]

[node name="Tip" type="Node3D" parent="Visuals"]

[node name="Metal" type="Node3D" parent="Visuals"]

[node name="Ring" type="Node3D" parent="Visuals"]

[node name="Colliders" type="Node3D" parent="."]

[node name="TipCollider" type="CollisionShape3D" parent="Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
shape = SubResource("SphereShape3D_tip")

[node name="MetalCollider" type="CollisionShape3D" parent="Colliders"]
shape = SubResource("CylinderShape3D_body")

[node name="RingCollider" type="CollisionShape3D" parent="Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
shape = SubResource("CylinderShape3D_ring")

[node name="RayCast3D" type="RayCast3D" parent="."]
target_position = Vector3(0, -0.2, 0)

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("2_wind")
volume_db = -10.0
max_db = 0.0
pitch_scale = 1.0
parameters/looping = true
